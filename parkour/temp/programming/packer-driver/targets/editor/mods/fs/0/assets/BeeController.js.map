{"version":3,"sources":["file:///D:/ProjectFiles/cocosCreater/NaughtyMonkey/parkour/assets/BeeController.ts"],"names":["v2","_decorator","Component","RigidBody2D","find","Animation","ccclass","property","BeeController","Number","judge","i","node","Math","abs","position","y","start","ifreset","random","reset","setPosition","dir","setScale","ifmove","rgd","getComponent","linearVelocity","update","deltaTime","during_time","judge_time","getPosition","x","getScale","z","die","play"],"mappings":"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","sourcesContent":["\r\nimport {v2, _decorator, Component, Node, RigidBody2D, find, Animation } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * Predefined variables\r\n * Name = BeeController\r\n * DateTime = Wed Mar 16 2022 19:47:19 GMT+0800 (中国标准时间)\r\n * Author = AlexiosLHB\r\n * FileBasename = BeeController.ts\r\n * FileBasenameNoExtension = BeeController\r\n * URL = db://assets/BeeController.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.4/manual/zh/\r\n *\r\n */\r\n \r\n@ccclass('BeeController')\r\nexport class BeeController extends Component {\r\n    // [1]\r\n    // dummy = '';\r\n\r\n    // [2]\r\n    // @property\r\n    // serializableDummy = 0;\r\n    @property(Number)\r\n    y:number\r\n    judge_time = 3;//10s\r\n    during_time = 0;\r\n    judge(){\r\n        for(var i =1;i<5;i++){\r\n            var node = find(\"Canvas/Hedgehog\"+i);\r\n            if(Math.abs(node.position.y-this.y)<=250 )return false;\r\n        }\r\n        return true;\r\n    }\r\n    start () {\r\n\r\n        let ifreset = Math.random();\r\n        if(ifreset<0.15&&this.judge())this.reset();\r\n        else this.node.setPosition(0,-1000,0);\r\n\r\n        \r\n        // [3]\r\n    }\r\n\r\n    reset(){\r\n        this.node.setPosition(Math.random()*(200+186)-186,this.y,0);\r\n        let dir = Math.random();\r\n        if(dir<0.5){\r\n            this.node.setScale(-0.25,0.25,0.25);\r\n        }\r\n        else {\r\n            this.node.setScale(0.25,0.25,0.25);\r\n        }\r\n        let ifmove = Math.random();\r\n        if(ifmove>0.5){\r\n            let rgd = this.node.getComponent(RigidBody2D);\r\n            if(dir<0.5){\r\n               \r\n                rgd.linearVelocity=v2(-5,-15);\r\n            }\r\n            else{\r\n                rgd.linearVelocity=v2(5,-15);\r\n\r\n            }\r\n        }\r\n        else{\r\n            let rgd = this.node.getComponent(RigidBody2D);\r\n            rgd.linearVelocity=v2(0,-15);\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    update (deltaTime: number) {\r\n        this.during_time +=deltaTime;\r\n        // [4]\r\n        if(this.during_time>this.judge_time&&this.node.getPosition().y<-870){\r\n            this.during_time = 0;\r\n     \r\n            let ifreset = Math.random();\r\n            if(ifreset<0.5&&this.judge())\r\n            this.reset()\r\n        \r\n    }\r\n       \r\n            let rgd = this.node.getComponent(RigidBody2D);\r\n            if(this.node.getPosition().x<=-186||this.node.getPosition().x>=200){\r\n            rgd.linearVelocity = v2(-rgd.linearVelocity.x,rgd.linearVelocity.y);\r\n            this.node.setScale(-this.node.getScale().x,this.node.getScale().y,this.node.getScale().z);\r\n        \r\n    }\r\n\r\n    }\r\n\r\n    die() {\r\n        this.node.getComponent(Animation).play('Bee_Hurt');\r\n    }\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.4/manual/zh/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.4/manual/zh/scripting/decorator.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.4/manual/zh/scripting/life-cycle-callbacks.html\r\n */\r\n"]}