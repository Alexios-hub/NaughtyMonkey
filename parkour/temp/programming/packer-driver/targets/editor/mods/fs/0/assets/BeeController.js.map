{"version":3,"sources":["file:///Users/liuhongbo/parkour/assets/BeeController.ts"],"names":["v2","_decorator","Component","RigidBody2D","find","ccclass","property","BeeController","Number","judge","i","node","Math","abs","position","y","start","ifreset","random","reset","setPosition","dir","setScale","ifmove","rgd","getComponent","linearVelocity","update","deltaTime","during_time","judge_time","getPosition","x","getScale","z"],"mappings":";;;;;;;;;;;;;;;;AACQA,MAAAA,E,OAAAA,E;AAAIC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;;;;;;;OAChD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;+BAGaM,a,WADZF,OAAO,CAAC,eAAD,C,UAQHC,QAAQ,CAACE,MAAD,C,oCARb,MACaD,aADb,SACmCL,SADnC,CAC6C;AAAA;AAAA;;AAAA;;AAAA,8CAS5B,CAT4B;;AAAA,+CAU3B,CAV2B;AAAA;;AAWzCO,QAAAA,KAAK,GAAE;AACH,eAAI,IAAIC,CAAC,GAAE,CAAX,EAAaA,CAAC,GAAC,CAAf,EAAiBA,CAAC,EAAlB,EAAqB;AACjB,gBAAIC,IAAI,GAAGP,IAAI,CAAC,oBAAkBM,CAAnB,CAAf;AACA,gBAAGE,IAAI,CAACC,GAAL,CAASF,IAAI,CAACG,QAAL,CAAcC,CAAd,GAAgB,KAAKA,CAA9B,KAAkC,GAArC,EAA0C,OAAO,KAAP;AAC7C;;AACD,iBAAO,IAAP;AACH;;AACDC,QAAAA,KAAK,GAAI;AAEL,cAAIC,OAAO,GAAGL,IAAI,CAACM,MAAL,EAAd;AACA,cAAGD,OAAO,GAAC,IAAR,IAAc,KAAKR,KAAL,EAAjB,EAA8B,KAAKU,KAAL,GAA9B,KACK,KAAKR,IAAL,CAAUS,WAAV,CAAsB,CAAtB,EAAwB,CAAC,IAAzB,EAA8B,CAA9B,EAJA,CAOL;AACH;;AAEDD,QAAAA,KAAK,GAAE;AACH,eAAKR,IAAL,CAAUS,WAAV,CAAsBR,IAAI,CAACM,MAAL,MAAe,MAAI,GAAnB,IAAwB,GAA9C,EAAkD,KAAKH,CAAvD,EAAyD,CAAzD;AACA,cAAIM,GAAG,GAAGT,IAAI,CAACM,MAAL,EAAV;;AACA,cAAGG,GAAG,GAAC,GAAP,EAAW;AACP,iBAAKV,IAAL,CAAUW,QAAV,CAAmB,CAAC,IAApB,EAAyB,IAAzB,EAA8B,IAA9B;AACH,WAFD,MAGK;AACD,iBAAKX,IAAL,CAAUW,QAAV,CAAmB,IAAnB,EAAwB,IAAxB,EAA6B,IAA7B;AACH;;AACD,cAAIC,MAAM,GAAGX,IAAI,CAACM,MAAL,EAAb;;AACA,cAAGK,MAAM,GAAC,GAAV,EAAc;AACV,gBAAIC,GAAG,GAAG,KAAKb,IAAL,CAAUc,YAAV,CAAuBtB,WAAvB,CAAV;;AACA,gBAAGkB,GAAG,GAAC,GAAP,EAAW;AAEPG,cAAAA,GAAG,CAACE,cAAJ,GAAmB1B,EAAE,CAAC,CAAC,CAAF,EAAI,CAAC,EAAL,CAArB;AACH,aAHD,MAII;AACAwB,cAAAA,GAAG,CAACE,cAAJ,GAAmB1B,EAAE,CAAC,CAAD,EAAG,CAAC,EAAJ,CAArB;AAEH;AACJ,WAVD,MAWI;AACA,gBAAIwB,GAAG,GAAG,KAAKb,IAAL,CAAUc,YAAV,CAAuBtB,WAAvB,CAAV;AACAqB,YAAAA,GAAG,CAACE,cAAJ,GAAmB1B,EAAE,CAAC,CAAD,EAAG,CAAC,EAAJ,CAArB;AAEH;AAEJ;;AAMD2B,QAAAA,MAAM,CAAEC,SAAF,EAAqB;AACvB,eAAKC,WAAL,IAAmBD,SAAnB,CADuB,CAEvB;;AACA,cAAG,KAAKC,WAAL,GAAiB,KAAKC,UAAtB,IAAkC,KAAKnB,IAAL,CAAUoB,WAAV,GAAwBhB,CAAxB,GAA0B,CAAC,GAAhE,EAAoE;AAChE,iBAAKc,WAAL,GAAmB,CAAnB;AAEA,gBAAIZ,OAAO,GAAGL,IAAI,CAACM,MAAL,EAAd;AACA,gBAAGD,OAAO,GAAC,GAAR,IAAa,KAAKR,KAAL,EAAhB,EACA,KAAKU,KAAL;AAEP;;AAEO,cAAIK,GAAG,GAAG,KAAKb,IAAL,CAAUc,YAAV,CAAuBtB,WAAvB,CAAV;;AACA,cAAG,KAAKQ,IAAL,CAAUoB,WAAV,GAAwBC,CAAxB,IAA2B,CAAC,GAA5B,IAAiC,KAAKrB,IAAL,CAAUoB,WAAV,GAAwBC,CAAxB,IAA2B,GAA/D,EAAmE;AACnER,YAAAA,GAAG,CAACE,cAAJ,GAAqB1B,EAAE,CAAC,CAACwB,GAAG,CAACE,cAAJ,CAAmBM,CAArB,EAAuBR,GAAG,CAACE,cAAJ,CAAmBX,CAA1C,CAAvB;AACA,iBAAKJ,IAAL,CAAUW,QAAV,CAAmB,CAAC,KAAKX,IAAL,CAAUsB,QAAV,GAAqBD,CAAzC,EAA2C,KAAKrB,IAAL,CAAUsB,QAAV,GAAqBlB,CAAhE,EAAkE,KAAKJ,IAAL,CAAUsB,QAAV,GAAqBC,CAAvF;AAEP;AAEA;;AAhFwC,O;;;;;;AAmF7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["\nimport {v2, _decorator, Component, Node, RigidBody2D, find } from 'cc';\nconst { ccclass, property } = _decorator;\n\n/**\n * Predefined variables\n * Name = BeeController\n * DateTime = Wed Mar 16 2022 19:47:19 GMT+0800 (中国标准时间)\n * Author = AlexiosLHB\n * FileBasename = BeeController.ts\n * FileBasenameNoExtension = BeeController\n * URL = db://assets/BeeController.ts\n * ManualUrl = https://docs.cocos.com/creator/3.4/manual/zh/\n *\n */\n \n@ccclass('BeeController')\nexport class BeeController extends Component {\n    // [1]\n    // dummy = '';\n\n    // [2]\n    // @property\n    // serializableDummy = 0;\n    @property(Number)\n    y:number\n    judge_time = 3;//10s\n    during_time = 0;\n    judge(){\n        for(var i =1;i<5;i++){\n            var node = find(\"Canvas/Hedgehog\"+i);\n            if(Math.abs(node.position.y-this.y)<=250 )return false;\n        }\n        return true;\n    }\n    start () {\n\n        let ifreset = Math.random();\n        if(ifreset<0.15&&this.judge())this.reset();\n        else this.node.setPosition(0,-1000,0);\n\n        \n        // [3]\n    }\n\n    reset(){\n        this.node.setPosition(Math.random()*(200+186)-186,this.y,0);\n        let dir = Math.random();\n        if(dir<0.5){\n            this.node.setScale(-0.25,0.25,0.25);\n        }\n        else {\n            this.node.setScale(0.25,0.25,0.25);\n        }\n        let ifmove = Math.random();\n        if(ifmove>0.5){\n            let rgd = this.node.getComponent(RigidBody2D);\n            if(dir<0.5){\n               \n                rgd.linearVelocity=v2(-5,-15);\n            }\n            else{\n                rgd.linearVelocity=v2(5,-15);\n\n            }\n        }\n        else{\n            let rgd = this.node.getComponent(RigidBody2D);\n            rgd.linearVelocity=v2(0,-15);\n\n        }\n\n    }\n\n\n\n\n\n    update (deltaTime: number) {\n        this.during_time +=deltaTime;\n        // [4]\n        if(this.during_time>this.judge_time&&this.node.getPosition().y<-870){\n            this.during_time = 0;\n     \n            let ifreset = Math.random();\n            if(ifreset<0.5&&this.judge())\n            this.reset()\n        \n    }\n       \n            let rgd = this.node.getComponent(RigidBody2D);\n            if(this.node.getPosition().x<=-186||this.node.getPosition().x>=200){\n            rgd.linearVelocity = v2(-rgd.linearVelocity.x,rgd.linearVelocity.y);\n            this.node.setScale(-this.node.getScale().x,this.node.getScale().y,this.node.getScale().z);\n        \n    }\n\n    }\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.4/manual/zh/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.4/manual/zh/scripting/decorator.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.4/manual/zh/scripting/life-cycle-callbacks.html\n */\n"]}