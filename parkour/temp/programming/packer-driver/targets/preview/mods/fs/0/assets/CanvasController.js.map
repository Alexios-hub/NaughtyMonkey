{"version":3,"sources":["file:///Users/frederickmo/Documents/GitHub/NaughtyMonkey/parkour/assets/CanvasController.ts"],"names":["v2","find","_decorator","Component","Label","RigidBody2D","BeeController","HedgehogController","monkey_controller","TreeController","BirdController","ccclass","property","LEVEL","CanvasController","LEVEL1","start","score","string","update","deltaTime","mk_controller","mk_state","score_during_time","ltree","ltree_rgd","getComponent","ltree_speed","linearVelocity","y","score_improve_timeline","parseInt","Math","ceil","level","origin_speed","ltree2_rgd","ltree2","rtree_rgd","rtree","rtree2_rgd","rtree2","LEVEL2","LEVEL3","LEVEL4","LEVEL5"],"mappings":"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","sourcesContent":["\nimport {v2,find,_decorator, Component, Node, Prefab, resources, instantiate, Label, RigidBody2D } from 'cc';\nimport { BeeController } from './BeeController';\nimport { HedgehogController } from './HedgehogController';\nimport { monkey_controller } from './monkey_controller';\nimport { TreeController } from './TreeController';\nimport { BirdController } from './BirdController';\nconst { ccclass, property } = _decorator;\n\n/**\n * Predefined variables\n * Name = CanvasController\n * DateTime = Mon Mar 14 2022 19:42:21 GMT+0800 (中国标准时间)\n * Author = AlexiosLHB\n * FileBasename = CanvasController.ts\n * FileBasenameNoExtension = CanvasController\n * URL = db://assets/CanvasController.ts\n * ManualUrl = https://docs.cocos.com/creator/3.4/manual/zh/\n *\n */\n\n\nenum LEVEL{\n    LEVEL1,\n    LEVEL2,\n    LEVEL3,\n    LEVEL4,\n    LEVEL5\n}\n \n@ccclass('CanvasController')\nexport class CanvasController extends Component {\n\n    score_improve_timeline = 0.2;\n\n    score_during_time = 0;\n\n    level = LEVEL.LEVEL1\n\n\n    @property(Label)\n    score:Label\n    @property(monkey_controller)\n    mk_controller:monkey_controller\n\n    @property(HedgehogController)\n    hedgehog1:HedgehogController\n    @property(HedgehogController)\n    hedgehog2:HedgehogController\n    @property(HedgehogController)\n    hedgehog3:HedgehogController\n    @property(HedgehogController)\n    hedgehog4:HedgehogController\n    @property(BeeController)\n    bee:BeeController\n    @property(TreeController)\n    ltree:TreeController\n    @property(TreeController)\n    ltree2:TreeController\n    @property(TreeController)\n    rtree:TreeController\n    @property(TreeController)\n    rtree2:TreeController\n\n    @property(BirdController)\n    bird: BirdController\n\n\n\n    // [1]\n    // dummy = '';\n\n    // [2]\n    // @property\n    // serializableDummy = 0;\n\n\n\n    start () {\n\n        this.score.string = \"0\";\n\n\n        \n\n        // [3]\n    }\n\n    update (deltaTime: number) {\n     \n        if(this.mk_controller.mk_state == 0){\n        this.score_during_time+=deltaTime;\n        let ltree = find(\"Canvas/ltree\");\n        let ltree_rgd = ltree.getComponent(RigidBody2D);\n        let ltree_speed = ltree_rgd.linearVelocity.y;\n\n\n\n     \n        // let rtree = find(\"Canvas/rtree\");\n        // let rtree_rgd = rtree.getComponent(RigidBody2D);\n        // rtree_rgd.linearVelocity = ltree_rgd.linearVelocity;\n\n        // let ltree2 = find(\"Canvas/ltree2\");\n        // let ltree2_rgd = ltree2.getComponent(RigidBody2D);\n        // ltree2_rgd.linearVelocity = ltree_rgd.linearVelocity;\n\n\n        // let rtree2 = find(\"Canvas/rtree2\");\n        // let rtree2_rgd = rtree2.getComponent(RigidBody2D);\n        // rtree2_rgd.linearVelocity = ltree_rgd.linearVelocity;\n\n\n\n        if(this.score_during_time>this.score_improve_timeline){\n            this.score_during_time = 0;\n\n            this.score.string = parseInt(this.score.string)+Math.ceil(-ltree_speed*deltaTime)+\"\";\n        }\n\n        switch (this.level){\n            case LEVEL.LEVEL1:\n                if(parseInt(this.score.string)>40){\n                    \n                   \n\n                    \n                    let ltree_rgd= this.ltree.getComponent(RigidBody2D);\n                    let origin_speed = ltree_rgd.linearVelocity.y;\n                    ltree_rgd.linearVelocity = v2(0,origin_speed-5);\n\n                    let ltree2_rgd= this.ltree2.getComponent(RigidBody2D);\n                    ltree2_rgd.linearVelocity = v2(0,origin_speed-5);\n\n                    let rtree_rgd= this.rtree.getComponent(RigidBody2D);\n                    rtree_rgd.linearVelocity = v2(0,origin_speed-5);\n\n                    let rtree2_rgd= this.rtree2.getComponent(RigidBody2D);\n                    rtree2_rgd.linearVelocity = v2(0,origin_speed-5);\n                    \n                    \n                    \n                    this.level = LEVEL.LEVEL2;\n                }\n                break;\n            case LEVEL.LEVEL2:\n                if(parseInt(this.score.string)>80){\n                    \n\n                  \n                    \n                    let ltree_rgd= this.ltree.getComponent(RigidBody2D);\n                    let origin_speed = ltree_rgd.linearVelocity.y;\n\n                    ltree_rgd.linearVelocity = v2(0,origin_speed-5);\n\n                    let ltree2_rgd= this.ltree2.getComponent(RigidBody2D);\n                    ltree2_rgd.linearVelocity = v2(0,origin_speed-5);\n\n                    let rtree_rgd= this.rtree.getComponent(RigidBody2D);\n                    rtree_rgd.linearVelocity = v2(0,origin_speed-5);\n\n                    let rtree2_rgd= this.rtree2.getComponent(RigidBody2D);\n                    rtree2_rgd.linearVelocity = v2(0,origin_speed-5);\n                    \n                    \n                    \n                    this.level = LEVEL.LEVEL3;\n\n                }\n                break;\n                case LEVEL.LEVEL3:\n                    if(parseInt(this.score.string)>120){\n\n                      \n    \n                       \n    \n                        \n                        let ltree_rgd= this.ltree.getComponent(RigidBody2D);\n                        let origin_speed = ltree_rgd.linearVelocity.y;\n                        ltree_rgd.linearVelocity = v2(0,origin_speed-5);\n    \n                        let ltree2_rgd= this.ltree2.getComponent(RigidBody2D);\n                        ltree2_rgd.linearVelocity = v2(0,origin_speed-5);\n    \n                        let rtree_rgd= this.rtree.getComponent(RigidBody2D);\n                        rtree_rgd.linearVelocity = v2(0,origin_speed-5);\n    \n                        let rtree2_rgd= this.rtree2.getComponent(RigidBody2D);\n                        rtree2_rgd.linearVelocity = v2(0,origin_speed-5);\n                        \n                        \n                        \n                        this.level = LEVEL.LEVEL4;\n\n                    }\n                    break;\n                    case LEVEL.LEVEL4:\n                        if(parseInt(this.score.string)>150){\n\n\n        \n        \n                            \n                          \n                            \n                            let ltree_rgd= this.ltree.getComponent(RigidBody2D);\n                            let origin_speed = ltree_rgd.linearVelocity.y;\n                            ltree_rgd.linearVelocity = v2(0,origin_speed -5);\n        \n                            let ltree2_rgd= this.ltree2.getComponent(RigidBody2D);\n                            ltree2_rgd.linearVelocity = v2(0,origin_speed -5);\n        \n                            let rtree_rgd= this.rtree.getComponent(RigidBody2D);\n                            rtree_rgd.linearVelocity = v2(0,origin_speed -5);\n        \n                            let rtree2_rgd= this.rtree2.getComponent(RigidBody2D);\n                            rtree2_rgd.linearVelocity = v2(0,origin_speed -5);\n                            \n                            \n                            \n                            this.level = LEVEL.LEVEL5;\n\n                        }\n              \n\n        }\n\n\n    \n    }\n\n        \n    }\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.4/manual/zh/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.4/manual/zh/scripting/decorator.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.4/manual/zh/scripting/life-cycle-callbacks.html\n */\n"]}